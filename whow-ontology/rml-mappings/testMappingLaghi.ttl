@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix l0: <https://w3id.org/italia/onto/l0/> .
@prefix iot: <https://w3id.org/italia/onto/IoT/> .
@prefix mu: <https://w3id.org/italia/onto/MU/> .
@prefix ti: <https://w3id.org/italia/onto/TI/> .
@prefix cov: <https://w3id.org/italia/onto/COV/> .
@prefix clv: <https://w3id.org/italia/onto/CLV/> .
@prefix indicator: <https://w3id.org/italia/onto/Indicator/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix fnml: <http://semweb.mmlab.be/ns/fnml#> .
@prefix grel: <http://users.ugent.be/~bjdmeest/function/grel.ttl#> .
@prefix fno: <https://w3id.org/function/ontology#> .
@prefix idlab-fn: <http://example.com/idlab/function/> .
@prefix sd: <http://www.w3.org/ns/sparql-service-description#> .
@prefix places: <https://w3id.org/stlab/places/> .
@prefix core: <https://dati.isprambiente.it/ontology/core/> .
@prefix whow-water: <https://whowproject.eu/ontologies/water-monitoring-ontology/>.
@base <https://whowproject.eu/data/> .

##########################################################
## LOGICAL SOURCES TO BE USED
##########################################################

# #LogicalSourceLaghi
<#LogicalSourceLaghi> a rml:BaseSource ;
    rml:source [
      a csvw:Table;
      csvw:url "Monitoraggio_laghi_dati_puliti.csv";
      csvw:dialect [
        a csvw:Dialect;
        csvw:delimiter ","
      ]
    ];
    rml:referenceFormulation ql:CSV .

#aggiungere logicalsource fiumi


###########################################################
##                  MAPPING RULES
##########################################################


# #################################
# ## OBSERVATION  MAPPING:
# #################################
<#WaterObservationMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "WaterObservation/{BACINO IDROGRAFICO}-{LAGO}-{CORPO IDRICO}-{PARAMETRO}-{DATA CAMPIONAMENTO}";
  rr:termType rr:IRI;
  rr:class whow-water:WaterChemicalAgentObservation
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Observation for the parameter {PARAMETRO} of water basin {Bacino IDROGRAFICO} for lake {LAGO}. Waterbody code: {CORPO IDRICO} at date {DATA CAMPIONAMENTO}" ; rr:language "en" ]
];
rr:predicateObjectMap [
  rr:predicate core:time;
  rr:objectMap [rr:template "date-{DATA CAMPIONAMENTO}"]
];
rr:predicateObjectMap [
  rr:predicate whow-water:relatedToWaterFeature;
  rr:objectMap [
  rr:parentTriplesMap <#RelatedToWaterFeatureMapping>]
] ;
rr:predicateObjectMap [
  rr:predicate whow-water:hasObservableProperty;
  rr:objectMap [
  rr:parentTriplesMap <#HasObservablePropertyMapping>]
] ;
rr:predicateObjectMap [
  rr:predicate whow-water:takenFromStation;
  rr:objectMap [
  rr:parentTriplesMap <#MonitoringStationMapping>]
];
rr:predicateObjectMap [
  rr:predicate core:hasObservationValue;
  rr:objectMap [
  rr:parentTriplesMap <#ObservationValueMapping>]
];

rr:predicateObjectMap [
  rr:predicate whow-water:relatedToPropertyAgent;
  rr:objectMap [
  rr:parentTriplesMap <#PropertyAgentMapping>]
];

rr:predicateObjectMap [
  rr:predicate whow-water:relatedWaterSamplingFeature;
  rr:objectMap [
  rr:parentTriplesMap <#WaterSamplingFeatureMapping>]
];

rr:predicateObjectMap [
  rr:predicate places:HasProvince;
  rr:objectMap [
  rr:parentTriplesMap <#ProvinceMapping>]
];

rr:predicateObjectMap [
  rr:predicate core:hasGeometry;
  rr:objectMap [
  rr:parentTriplesMap <#GeometryMapping>]
];

rr:predicateObjectMap [
  rr:predicate core:hasMunicipality;
  rr:objectMap [
  rr:parentTriplesMap <#MunicipalityMapping>]
]
 .


<#HasObservablePropertyMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/ObservableProperty/Concentration";
  rr:termType rr:IRI;
  rr:class whow-water:ObservableProperty
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Concentration" ; rr:language "en" ]
].
<#MonitoringStationMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/MonitoringStation/{Codice Stazione}";
  rr:termType rr:IRI;
  rr:class whow-water:WaterMonitoringStation
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Monitoring station identifier for station {Codice Stazione}" ; rr:language "en" ]
].

<#WaterSamplingFeatureMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/WaterSamplingFeature/{Descrizione Profondità}-{Profondità}";
  rr:termType rr:IRI;
  rr:class whow-water:WaterSamplingFeature
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Water depth sampling description: {Descrizione Profondità} in the value/range value {Profondità}" ; rr:language "en" ]
].
<#GeometryMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/Geometry/geometry_{COORD X}-{COORD Y}";
  rr:termType rr:IRI;
  rr:class core:Geometry
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Latitude {COORD X} and Longitude {COORD Y}" ; rr:language "en" ]
].
<#ProvinceMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/Province/{PROVINCIA}";
  rr:termType rr:IRI;
  rr:class places:Province
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Province of the observation." ; rr:language "en" ]
].
<#MunicipalityMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/Municipality/{COMUNE}";
  rr:termType rr:IRI;
  rr:class places:Municipality
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Municipality of the observation." ; rr:language "en" ]
].
# #################################
# ## WATER FEATURE MAPPING
# #################################
<#RelatedToWaterFeatureMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/LakeWaterBody/{LAGO}";
  rr:termType rr:IRI;
  rr:class whow-water:LakeWaterBody
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Lake waterbody {LAGO}" ; rr:language "en" ]
];
rr:predicateObjectMap [
  rr:predicate core:isPartOf;
  rr:objectMap [
  rr:parentTriplesMap <#WaterBasinMapping>]
].
<#WaterBasinMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/WaterBasin/{BACINO IDROGRAFICO}";
  rr:termType rr:IRI;
  rr:class whow-water:WaterBasin
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Water basin {BACINO IDROGRAFICO}" ; rr:language "en" ]
].

# #################################
# ## PROPERTY AGENT MAPPING
# #################################
<#PropertyAgentMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/ChemicalAgent/{CAS}";
  rr:termType rr:IRI;
  rr:class whow-water:ChemicalAgent
] ;
rr:predicateObjectMap [
  rr:predicate rdfs:label;
  rr:objectMap [ rr:template "Chemical agent identifier for the agent {PARAMETRO}: {CAS}. Identification system: {ParameterIdentificationSystem}" ; rr:language "en" ]
].


#rr:predicateObjectMap [
#  rr:predicate core:hasUniqueIdentifier;
#  rr:objectMap [
#  rr:parentTriplesMap <#UniqueIdentifierMapping>]
#].

#<#UniqueIdentifierMapping> a rr:TriplesMap ;
#rml:logicalSource <#LogicalSourceLaghi> ;
#rr:subjectMap [
#  rr:template "https://whowproject.eu/data/examples/test/{CAS}";
#  rr:termType rr:IRI;
#  rr:class core:UniqueIdentifier
#] .

# #################################
# ## OBSERVATION VALUE MAPPING
# #################################

<#ObservationValueMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/ObservationValue/{VALORE}-{UM}";
  rr:termType rr:IRI;
  rr:class core:ObservationValue

] ;

rr:predicateObjectMap [
  rr:predicate core:hasValue;
  rr:objectMap [
  rr:parentTriplesMap <#ObservationValueHasValueMapping>]
];

rr:predicateObjectMap [
  rr:predicate core:hasUnitOfMeasure;
  rr:objectMap [
  rr:parentTriplesMap <#UnitOfMeasureMapping>]
].

<#ObservationValueHasValueMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/Value/{VALORE}";
  rr:termType rr:IRI;
  rr:class core:Value
] .

<#UnitOfMeasureMapping> a rr:TriplesMap ;
rml:logicalSource <#LogicalSourceLaghi> ;
rr:subjectMap [
  rr:template "https://whowproject.eu/data/UM/{UM}";
  rr:termType rr:IRI;
  rr:class core:UnitOfMeasure
] .


# #################################
# ## WATER SAMPLING MAPPING
# #################################
